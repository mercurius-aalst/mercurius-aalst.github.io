@page "/media"
@inject HttpClient Http

<PageTitle>Mercurius Aalst - Media</PageTitle>

<Banner Title="Media"/>

@if (albums == null)
{
	<p><em>Loading...</em></p>
} 
else
{
	<div class="albums">
		@foreach (Album album in albums.OrderByDescending(a => a.Date))
		{
			<div class="container">
				<a href="@album.Link" target="_blank">
					<div class="album">
						<img src="@(album.CoverUrl+".jpg")" class="album-image" />
						<div class="back-image" />
					</div>
				</a>
				<p class="album-text">
					<h6>@album.Date.ToString("dd/MM/yyyy")</h6>
					<h5><b>@album.Name</b></h5>
				</p>
			</div>
		}
		<div class="container empty-container" />
		<div class="container empty-container" />
		<div class="container empty-container" />
	</div>
}

@code {
	private Album[]? albums;

	protected override async Task OnInitializedAsync()
	{
		albums = await Http.GetFromJsonAsync<Album[]>("sample-data/albums.json");
	}

	public class Album
	{
		public string Name { get; set; } = default!;
		public DateTime Date { get; set; } = default!;
		public string Link { get; set; } = default!;
		public string CoverUrl { get; set; } = default!;
	}
}